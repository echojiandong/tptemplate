<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>课程编辑</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" href="__LAY__css/layui.css" media="all" />
	<script type="text/javascript" charset="utf-8" src="__UE__ueditor.config.js"></script>
	<script type="text/javascript" charset="utf-8" src="__UE__ueditor.all.min.js"> </script>
	<script type="text/javascript" charset="utf-8" src="__UE__lang/zh-cn/zh-cn.js"></script>
</head>
<body class="childrenBody" style="margin-top: 2em">
	<form class="layui-form">
		
		<div class="layui-form-item" id="add">
			<div class="layui-inline">
				<label class="layui-form-label">课程名称：</label>
				<div class="layui-input-block">
					<input type="text" name="vname" class="layui-input newsAuthor" style="width: 210px" lay-verify="required" value="{$data['name']}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">课程标题：</label>
				<div class="layui-input-block">
					<input type="text" name="titleName" class="layui-input newsAuthor" style="width: 210px" lay-verify="required" value="{$data['title']}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">学段</label>
			      <div class="layui-input-block">
			        <select name="learn_id">
			            <option value="">请选择</option>
			         	{volist name="getLearn" id="v"}
			        		<option value="{$v.id}" {if condition="$data.learn_id == $v.id "}selected{/if}>{$v.learn}</option>
			    		{/volist}
			        </select>
			      </div>
		    </div>
			<div class="layui-inline">
				<label class="layui-form-label">年级</label>
			      <div class="layui-input-block">
			        <select name="grade_id">
			            <option value="">请选择</option>
			         	{volist name="getgrade" id="v"}
			        		<option value="{$v.id}" {if condition="$data.grade_id == $v.id"}selected{/if}>{$v.grade}</option>
			    		{/volist}
			        </select>
			      </div>
		    </div>
		</div>
		<div class="layui-form-item">
			<div class="layui-inline">
				<label class="layui-form-label">科目</label>
			      <div class="layui-input-block">
			        <select name="subject_id">
			            <option value="">请选择</option>
			         	{volist name="getSubject" id="v"}
			        		<option value="{$v.id}" {if condition="$data.subject_id == $v.id"}selected{/if}>{$v.subject}</option>
			    		{/volist}
			        </select>
			      </div>
		    </div>
		    <div class="layui-inline">
				<label class="layui-form-label">教材版本</label>
				<div class="layui-input-block">
			      <select name="edition_id" lay-filter="aihao">
			        <option value=""></option>
			        {volist name="textBook_res" id="v"}
			        	<option value="{$v.id}" {if condition="$data.edition_id == $v.id"} selected {/if}>{$v.textbook}</option>
			    	{/volist}
			      </select>
			    </div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">学期：</label>
				<div class="layui-input-block">
			      <select name="Semester" lay-filter="aihao">
			        <option value=""></option>
			        <option value="1" {if condition="$data.Semester == 1"} selected {/if}>上学期</option>
			        <option value="2" {if condition="$data.Semester == 2"} selected {/if}>下学期</option>
			      </select>
			    </div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">讲师：</label>
				<div class="layui-input-block">
			      <select name="teacherId" lay-filter="aihao">
			        <option value=""></option>
			        {volist name="teacher" id="v"}
			        	<option value="{$v.id},{$v.name}" {if condition="$data.teacherId == $v.id"} selected {/if}>{$v.name}</option>
			    	{/volist}
			      </select>
			    </div>
			</div>
			<!--<div class="layui-inline">
				<label class="layui-form-label">推荐：</label>
				<div class="layui-input-block">
					<input type="checkbox" name="recommend" class="tuijian" title="推荐">
				</div>
			</div>-->
		</div>
		<div class="layui-form-item">
			<div class="layui-inline">
				<label class="layui-form-label">价格：</label>
				<div class="layui-input-inline">
					<input type="text" name="price" class="layui-input newsAuthor"  style="width: 210px" lay-verify="price" value="{$data['price']}" >
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">折扣：</label>
				<div class="layui-input-inline">
					<input type="text" name="Discount" class="layui-input newsAuthor" style="width: 210px" lay-verify="rebate" value="{$data['Discount']}" >
				</div>
			</div>
			
		</div>
		<div class="layui-form-item">
			<div class="layui-inline">
				<label class="layui-form-label">是否可试听</label>
				<div class="layui-input-block">
					<input type="radio" name="audi" value="1" title="可试听" {if condition="$data.audi == 1 "}checked{/if}>
					<input type="radio" name="audi" value="2" title="不可试听" {if condition="$data.audi == 2"}checked{/if}>
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">试听价格：</label>
				<div class="layui-input-inline">
					<input type="text" name="audition_price" class="layui-input newsAuthor"  style="width: 210px" lay-verify="audition_price" value="{$data['audition_price']}" >
				</div>
			</div>
		</div>
		<input  name="id" value="{$id}" type="hidden">
		<div class="layui-form-item">
			<label class="layui-form-label" style="display: block">图片(已购买)</label>
			<div class="site-demo-upload">
				<div class="layui-upload-drag" id="test9">
					<i class="layui-icon"></i>
					<p>点击上传，或将文件拖拽到此处</p>
				</div>
				<img id="imgYes" style="width: 300px; height: 135px;  margin-top: -60px;" src="{$data['img']}"/>
				<input type="hidden" name="image"  id="image" lay-verify="image"  value="{$data['img']}">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label" style="display: block">图片(未购买)</label>
			<div class="site-demo-upload">
				<div class="layui-upload-drag" id="test10">
					<i class="layui-icon"></i>
					<p>点击上传，或将文件拖拽到此处</p>
				</div>
				<img id="imgNo" style="width: 300px; height: 135px;  margin-top: -60px;" src="{$data['imgNo']}"/>
				<input type="hidden" name="imageNo"  id="imageNo" lay-verify="image"  value="{$data['imgNo']}">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">课程简介</label>
			<div class="layui-input-block">
				<script id="editor" name="editor" type="text/plain" class="layui-form-item">{$data.content|default=''}</script>
			</div>
		</div>
		
		
		<div class="layui-form-item">
			<div class="layui-input-block">
				<button class="layui-btn" lay-submit="" lay-filter="upCourse">立即提交</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
		    </div>
		</div>
	</form>
	<script type="text/javascript" src="__LAY__layui.js"></script>
	<script type="text/javascript" src="__MANAGE__/js/video/videoUpdata.js"></script>
</body>
</html>
<script>
    var ue = UE.getEditor('editor',{initialFrameWidth:"90.8%",initialFrameHeight:300});
    var i=1;
    function addVideoTypeg22222(){
    	var e=$('#number').val();
    	if(e>=1)
    	{
    		i=parseInt(e)+1;
    	}
    	else
    	{
    		i=1;
    	}
    	var html='';
    	  html="<div class='layui-form-item' id='videodd"+i+"'>";
    	  html+="<div class='layui-inline'>";
	  html+=			"<label class='layui-form-label'>课程名称：</label>";
	  html+=			"<div class='layui-input-block'>";
	  html+=				"<input type='text' name='title"+i+"' class='layui-input newsAuthor' style='width: 250px' lay-verify='required' placeholder='请输入课程名称'>";
	  html+=			"</div>";
	  html+=		"</div>";
	  html+=		"<div class='layui-inline'>";
	  html+=			"<label class='layui-form-label'>视频地址：</label>";
	  html+=			"<div class='layui-input-block'>";
	  html+=				"<input type='text' name='url"+i+"' style='width: 250px' class='layui-input newsAuthor'  lay-verify='url' placeholder='请输入视频链接如：www.baidu.com' >";
	  html+=			"</div>";
	  html+=		"</div>";
	   html+=		"<image src='__MANAGE__/images/cha.png' style='background-color: #ccc;border-radius: 30px;height: 30px;width: 30px;' onclick='delvideo("+i+")'>";
	  html+="</div>";
	$('#add').append(html);
	document.getElementById('number').value=i;
	i=parseInt(i)+1;
    }
    function delvideo(tr)
    {
	//根据节点获取当前行
	var o = document.getElementById("videodd"+tr);
	o.remove();
	var df=document.getElementById('number').value;
	//document.getElementById('number').value=parseInt(df)-1;
    }
     // 增加训练计划
    var b=1;
    function addxunlian()
    {
    	var c=$('#xun_number').val();
    	if(c>=1)
    	{
    		b=parseInt(c)+1;
    	}
    	else
    	{
    		b=1;
    	}
    	var html='';
    	html+="<div class='layui-form-item' id='ddd"+b+"'>";
	html+=		"<div class='layui-inline'>";
	html+=			"<label class='layui-form-label'>动作：</label>";
	html+=			"<div class='layui-input-inline'>";
	html+=				"<input type='text' name='action"+b+"' class='layui-input newsAuthor'  placeholder='请输入动作名称' >";
	html+=			"</div>";
	html+=		"</div>";
	html+=		"<div class='layui-inline'>";
	html+=			"<label class='layui-form-label'>个数/时间：</label>";
	html+=			"<div class='layui-input-inline'>";
	html+=				"<input type='text' name='num_time"+b+"' class='layui-input newsAuthor'   placeholder='请输入每组要做个数' >";
	html+=			"</div>";
	html+=		"</div>";
	html+=		"<div class='layui-inline'>";
	html+=			"<label class='layui-form-label'>组数：</label>";
	html+=			"<div class='layui-input-inline'>";
	html+=				"<input type='text' name='group_num"+b+"' class='layui-input newsAuthor' placeholder='请输入组数'>";
	html+=			"</div>";
	html+=		"</div>";
	html+=		"<div class='layui-inline'>";
	html+=			"<label class='layui-form-label'>组时间：</label>";
	html+=			"<div class='layui-input-inline'>";
	html+=				"<input type='text' name='group_time"+b+"' class='layui-input newsAuthor' placeholder='请输入每组时间'>";
	html+=			"</div>";
	html+=		"</div>";
	html+=		"<div class='layui-inline'>";
	html+=			"<label class='layui-form-label'>组间休息：</label>";
	html+=			"<div class='layui-input-inline'>";
	html+=				"<input type='text' name='group_rest"+b+"' class='layui-input newsAuthor' placeholder='请输入组间休息时间' >";
	html+=			"</div>";
	html+=		"</div>	";
	html+=		"<image src='__MANAGE__/images/cha.png' style='background-color: #ccc;border-radius: 30px;height: 30px;width: 30px;' onclick='del("+b+")'>";
	html+=	"</div>";
	$('#addxunlian').append(html);
	document.getElementById('xun_number').value=b;
	b=b+1;
    }
    function del(a)
    {
	//获取父元素
	var info = document.getElementById("addxunlian");
	//根据节点获取当前行
	var o = document.getElementById("ddd"+a);
	o.remove();
	var df=document.getElementById('xun_number').value;
	//document.getElementById('xun_number').value=parseInt(df)-1;
	//var rowIndex = o.parentNode.parentNode.rowIndex;
	//删除一行
	//info.deleteRow(rowIndex-1);
    }
</script>